<app-main-toolbar back="/settings/logging" *transloco="let t">{{t('page_settings_showwatchlogs.page_title')}}</app-main-toolbar>

<ion-content scrollEvents="true" scrollX="false" (ionScroll)="onScroll($event)" #mainContent *transloco="let t">
    <div class="select">
        <ion-select interface="action-sheet" [interfaceOptions]="{header: t('page_settings_showwatchlogs.select_watch')}" [value]="Device" [cancelText]="t('buttons.cancel')" [disabled]="!Device" (ionChange)="onChangeDevice($event)">
            <ion-text slot="label">{{Device?.Name ?? t('page_settings_showwatchlogs.no_watch')}}</ion-text>
            @for(device of availableDevices; track device.Identifier) {
            <ion-select-option [value]="device" (selected)="Device?.Identifier == device.Identifier">{{device.Name}}</ion-select-option>
            }
        </ion-select>
    </div>
    @if (DeviceLog) {
    <div id="logtext" #logContent>{{DeviceLog}}</div>
    }@else {
    <app-page-empty>
        <div slot="image">
            <ion-icon src="./assets/icons/info.svg"></ion-icon>
        </div>
        <div slot="text">
            <ion-text [innerHTML]="Device ? t('page_settings_showwatchlogs.no_logs') : t('page_settings_showwatchlogs.no_device')"></ion-text>
        </div>
    </app-page-empty>
    }
    <ion-fab slot="fixed" vertical="bottom" horizontal="end">
        <ion-fab-button (click)="loadLog()" [disabled]="!Device">
            <ion-icon src="./assets/icons/reload.svg"></ion-icon>
        </ion-fab-button>
    </ion-fab>

    @if (ShowScrollButtons) {
    <ion-fab slot="fixed" vertical="bottom" horizontal="start">
        <ion-fab-button (click)="ScrollToTop()" [disabled]="DisableScrollToTop">
            <ion-icon src="./assets/icons/to-top.svg"></ion-icon>
        </ion-fab-button>
        <ion-fab-button (click)="ScrollToBottom(false)" [disabled]="DisableScrollToBottom">
            <ion-icon src="./assets/icons/to-top.svg" class="to-bottom"></ion-icon>
        </ion-fab-button>
    </ion-fab>
    }
</ion-content>
